<template name="searchOverlay">
	<div class="container if-container">
		{{#momentum plugin='slide-height'}}
			{{#if overlayVisible}}
				{{> searchOverlayApp}}
			{{/if}}
		{{/momentum}}
	</div>
</template>

<template name="searchOverlayApp">
	<div class="search-overlay">
		<a class="js-overlay-close overlay-close"><i class="fa fa-2x fa-times vcenter"></i></a>
		<div class="container wrapper-xl">
			<div class="row wrapper-lg">
				<div class="col-md-12">
					<form>
						<div class="input-group m-b">
							<span class="input-group-btn">
								<button class="btn btn-default" type="submit"><i class="fa fa-search fa-2x"></i></button>
							</span>
							{{> esInput index=searchIndexes type="search" class="search-input" placeholder="search"}}
						</div>
					</form>
				</div>
			</div>
			<div class="row wrapper-md">
				<div class="col-md-4">
					<h3 class="text-center">Games</h3>
					<div class="xbdgames-container">
						{{#ifEsInputIsEmpty index="xbdgames"}}
							<div> search for games </div>
						{{/ifEsInputIsEmpty}}

						{{#ifEsIsSearching index="xbdgames"}}
							<div> Loading.... </div>
						{{else}}
							{{#ifEsHasNoResults index="xbdgames"}}
							{{else}}
							<ul class="list-group alt">
							{{#esEach index="xbdgames"}}
								{{> singleGameSearch}}
							{{/esEach}}
							</ul>
							{{/ifEsHasNoResults}}
						{{/ifEsIsSearching}}

						{{#ifEsHasNoResults index="xbdgames"}}
							<div> No results were found </div>
						{{/ifEsHasNoResults}}
					</div>
				</div>
				<div class="col-md-4">
					<h3 class="text-center">Achievements</h3>
					<div class="xbdachievements-container">
						{{#ifEsInputIsEmpty index="xbdachievements"}}
							<div> search for achievements </div>
						{{/ifEsInputIsEmpty}}

						{{#ifEsIsSearching index="xbdachievements"}}
							<div> Loading.... </div>
						{{else}}
							{{#ifEsHasNoResults index="xbdachievements"}}
							{{else}}
							<ul class="list-group alt">
							{{#esEach index="xbdachievements"}}
								{{> singleAchievementSearch}}
							{{/esEach}}
							</ul>
							{{/ifEsHasNoResults}}
						{{/ifEsIsSearching}}

						{{#ifEsHasNoResults index="xbdachievements"}}
							<div> No results were found </div>
						{{/ifEsHasNoResults}}
					</div>
				</div>
				<div class="col-md-4">
					<h3 class="text-center">News</h3>
					<div class="newspolygon-container">
						{{#ifEsInputIsEmpty index="newspolygon"}}
							<div> search for news </div>
						{{/ifEsInputIsEmpty}}

						{{#ifEsIsSearching index="newspolygon"}}
							<div> Loading.... </div>
						{{else}}
							{{#esEach index="newspolygon"}}
								{{> singleNewsSearch}}
							{{/esEach}}
						{{/ifEsIsSearching}}

						{{#ifEsHasNoResults index="newspolygon"}}
							<div> No results were found </div>
						{{/ifEsHasNoResults}}
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="singleGameSearch">
	<li class="list-group-item">
		<a href="{{pathFor 'game'}}">
			<div class="media game">
				<span class="pull-left thumb-lg"><img src="{{gamesImage}}" alt="{{this.name}}"></span>
				<div class="pull-right text-success m-t-xxl">
					<i class="fa fa-trophy"></i> {{this.maxGamerscore}}
				</div>
				<div class="media-body p-t-xxl">
					<div>{{this.name}}</div>
					<small class="text-muted clear text-ellipsis">{{gamePublisherName}}</small>
				</div>
			</div>
		</a>
	</li>
</template>

<template name="singleAchievementSearch">
	<li class="list-group-item">
		<a href="{{pathFor 'achievement'}}">
			<div class="media achievement">
				<span class="pull-left thumb-sm m-t-xs"><img src="{{this.mediaAssets}}" alt="{{this.name}}"></span>
				<div class="pull-right text-success m-t-sm">
					<i class="fa fa-trophy"></i> {{this.value}}
				</div>
				<div class="media-body">
					<div>{{this.name}}</div>
					<small class="text-muted clear text-ellipsis">{{this.userPercentage}}% have this</small>
				</div>
			</div>
		</a>
	</li>
</template>

<template name="singleNewsSearch">
	<div class="col-xs-12">
		<div class="panel news">
			<a class="article-url" href="{{pathFor 'article'}}">
				<div class="item m-l-n-xxs m-r-n-xxs post-image-box">
					<img src="{{getImage}}" class="img-full">
				</div>
				<div class="panel-heading no-border bg-success post-title-box">
					<h3 class="text-lt h4 m-b-sm title-wrap" style="min-height: 60px;">{{this.title}}</h3>
					<div class="text-lt h5 text-primary-lter">by {{this.author}}</div>
					<div class="text-lt text-primary-lter">{{updatedDate}}</div>
				</div>
			</a>
			<div class="panel-share-count text-center">
				<i class="fa fa-square-share-o text-muted"></i> {{shareCount}}
			</div>
		</div>
	</div>
</template>