<template name="newsPage">
	{{> newsApp}}
</template>

<template name="newsApp">
	<div id="content" class="app-content" role="main">
		<div class="app-content-body ">
			<div class="hbox hbox-auto-xs hbox-auto-sm">
				<div class="col">
					<div class="bg-light lter b-b wrapper-md">
						<div class="row">
							<div class="col-sm-6 col-xs-12">
								<h1 class="m-n font-thin h3 text-black">Latest News</h1>
								<small class="text-muted">Read the latest in Xbox&reg; achievements, search solutions</small>
							</div>
							{{#if chkGamerStatus}}
							<div class="col-sm-6 text-right hidden-xs user-rank-area">
								<div class="inline m-l m-r text-left">
									{{> userDailyRank}}
								</div>
								<div class="inline text-left">
									{{> userOverallRank}}
								</div>
							</div>
							{{/if}}
						</div>
					</div>
					<div class="wrapper-md">
						<div class="row">
							{{> featuredNewsSection}}
						</div>
						<div class="row">
							<div class="col-lg-8 col-md-12">
								<!-- <h3 class="m-b-sm font-thin h3 text-black">News from XBdash</h3> -->
								{{> newsSection}}
							</div>
							<div class="col-lg-4 hidden-md hidden-sm hidden-xs trending-column">
								<h2 class="m-b-sm font-thin h3 text-black">Trending News</h2>
								{{> mostSharedNews limit=5}}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="featuredNewsSection">
	<div class="featured-news row no-gutter">
		<div class="col-md-3 col-sm-6">
			<div class="panel b-a">
				<div class="panel-heading no-border bg-primary">          
					<span class="text-lt">New Announcements</span>
				</div>
				{{#if newAnnouncement}}
					{{> todaysFeaturedAnnouncements}}
				{{else}}
					<div class="text-center wrapper m-b-sm">
						<div class="clearfix">
							<a class="pull-left thumb-lg img-thumbnail b-3x m-r" style="" href="#">
								<img src="/img/news-default.jpg" alt="No New Announcements">
							</a>
							<div class="clear text-left">
								<div class="h3 m-t-xs m-b-xs">
									<p style="margin-bottom: 44%;">No Recent Announcements</p>
								</div>
							</div>
						</div>
					</div>
				{{/if}}
			</div>
		</div>
		<div class="col-md-3 col-sm-6">
			<div class="panel b-a">
				<div class="panel-heading no-border bg-primary">          
					<span class="text-lt">Today's Featured News</span>
				</div>
				{{#if newNews}}
					{{> todaysFeaturedNews}}
				{{else}}
					<div class="item m-l-n-xxs m-r-n-xxs">
						<div class="bottom wrapper bg-gd-dk text-white">            
							<div class="text-lt m-b-sm title-wrap-news">No Featured News</div>
						</div>
						<img src="/img/news-default.jpg" class="img-full">
					</div>
				{{/if}}
			</div>
		</div>
		<div class="col-md-3 col-sm-6">
			<div class="panel b-a">
				<div class="panel-heading no-border bg-primary">          
					<span class="text-lt">Today's Featured Clip</span>
				</div>
				{{#if newClip}}
					{{> todaysFeaturedClip}}
				{{else}}
					<div class="item m-l-n-xxs m-r-n-xxs">
						<div class="bottom wrapper bg-gd-dk text-white">            
							<div class="m-b-sm">No new clips.</div>
						</div>
						<img src="/img/news-default.jpg" class="user-clip large img-full">
					</div>
				{{/if}}
			</div>
		</div>
		<div class="col-md-3 col-sm-6">
			<div class="panel b-a">
				<div class="panel-heading no-border bg-primary">          
					<span class="text-lt">Today's Featured Capture</span>
				</div>
				{{#if newCapture}}
					{{> todaysFeaturedCapture}}
				{{else}}
					<div class="item m-l-n-xxs m-r-n-xxs">
						<div class="bottom wrapper bg-gd-dk text-white">            
							<div class="m-b-sm">No new captures.</div>
						</div>
						<img src="/img/news-default.jpg" class="user-capture large img-full">
					</div>
				{{/if}}
			</div>
		</div>
	</div>
</template>

<template name="todaysFeaturedAnnouncements">
	<div class="text-center wrapper m-b-sm">
		<div class="clearfix">
			<a class="pull-left thumb-lg img-thumbnail b-3x m-r" style="" href="">
				<img src="/img/news-default.jpg" alt="No New Announcements">
			</a>
			<div class="clear text-left">
				<div style="min-height: 183px;" class="h3 m-t-xs m-b-xs"><p style="">Breaking News: Major Nelson does it again! Text here. Text here. Text here.</p><a href="#" class="btn btn-primary">Read more</a>
				</div>
			</div>
		</div>
	</div>
</template>

<template name="todaysFeaturedNews">
	<div class="item m-l-n-xxs m-r-n-xxs">
		<div class="bottom wrapper bg-gd-dk text-white">            
			<div class="text-lt m-b-sm title-wrap-news">{{title}}</div>
			<a href="{{pathFor 'article'}}" class="btn btn-primary btn-sm">Read Now</a>
		</div>
		<img src="{{getImage}}" class="img-full">
	</div>
</template>

<template name="todaysFeaturedClip">
	<div class="item m-l-n-xxs m-r-n-xxs">
		<div class="bottom wrapper bg-gd-dk text-white">            
			<div class="m-b-sm">Clip from {{titleName}}</div>
			<a title="View Now" href="#" class="btn btn-primary btn-sm">View Now</a>
		</div>
		<img src="{{getLargeThumbnail}}" data-video="{{getClipUri}}" class="user-clip large img-full">
	</div>
</template>

<template name="todaysFeaturedCapture">
	<div class="item m-l-n-xxs m-r-n-xxs">
		<div class="bottom wrapper bg-gd-dk text-white">            
			<div class="m-b-sm">Capture from {{titleName}}</div>
			<a title="View Now" href="#" class="btn btn-primary btn-sm">View Now</a>
		</div>
		<img src="{{getLargeThumbnail}}" class="user-capture large img-full">
	</div>
</template>

<!-- <div class="row no-gutter">
	<div class="col-md-3 col-sm-6">
		<div class="panel b-a">
			<div class="panel-heading no-border bg-primary">          
				<span class="text-lt">New Announcements</span>
			</div>
			<div style="" class="text-center wrapper m-b-sm">
				<div class="clearfix">
					<a class="pull-left thumb-lg img-thumbnail b-3x m-r" style="" href="">
						<img src="img/a2.jpg" alt="...">
					</a>
					<div class="clear text-left">
						<div style="min-height: 183px;" class="h3 m-t-xs m-b-xs"><p style="">Breaking News: Major Nelson does it again! Text here. Text here. Text here.</p><a href="#" class="btn btn-primary">Read more</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="col-md-3 col-sm-6">
		<div class="panel b-a">
			<div class="panel-heading no-border bg-primary">          
				<span class="text-lt">Today's Featured News</span>
			</div>
			<div class="item m-l-n-xxs m-r-n-xxs">
				<div class="bottom wrapper bg-gd-dk text-white">            
					<div class="text-lt m-b-sm title-wrap-news">Coffee</div>
					<div class="btn btn-primary btn-sm">View Now</div>
				</div>
				<img src="img/c0.jpg" class="img-full">
			</div>
		</div>
	</div>
	<div class="col-md-3 col-sm-6">
		<div class="panel b-a">
			<div class="panel-heading no-border bg-primary">          
				<span class="text-lt">Today's Featured Clip</span>
			</div>
			<div class="item m-l-n-xxs m-r-n-xxs">
				<div class="bottom wrapper bg-gd-dk text-white">            
					<div class="m-b-sm">Clip from {{titleName}}</div><div class="btn btn-primary btn-sm">View Now</div>
				</div>
				<img src="img/c0.jpg" class="img-full">
			</div>
		</div>
	</div>
	<div class="col-md-3 col-sm-6">
		<div class="panel b-a">
			<div class="panel-heading no-border bg-primary">          
				<span class="text-lt">Today's Featured Capture</span>
			</div>
			<div class="item m-l-n-xxs m-r-n-xxs">
				<div class="bottom wrapper bg-gd-dk text-white">            
					<div class="m-b-sm">Capture from {{titleName}}</div><div class="btn btn-primary btn-sm">View Now</div>
				</div>
				<img src="img/c0.jpg" class="img-full">
			</div>
		</div>
	</div>
</div>
 -->
<template name="newsSection">
	{{#if Template.subscriptionsReady}}
	<div class="blog-post news-section">
		<div class="list-group list-group-lg list-group-sp">
		{{#each latestNews}}
			{{> newsTemplate}}
		{{/each}}
		</div>
		<div style="display:block;">&nbsp;</div>
	</div>
	{{#if hasMoreResults}}
		<div id="hasMoreResults">{{> loadingTemplateRect}}</div>
	{{/if}}
	{{else}}
		{{> loadingTemplate}}
	{{/if}}
</template>